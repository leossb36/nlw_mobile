{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/leonardo/dev/nlw1/nlw_mobile/src/pages/Points/index.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport Constants from \"expo-constants\";\nimport { Feather as Icon } from \"@expo/vector-icons\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport MapView, { Marker } from \"react-native-maps\";\nimport { SvgUri } from \"react-native-svg\";\nimport api from \"../../services/api\";\nimport * as Location from 'expo-location';\n\nvar Points = function Points() {\n  var navigation = useNavigation();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      items = _useState2[0],\n      setItems = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      selectedItems = _useState4[0],\n      setSelectedItems = _useState4[1];\n\n  var _useState5 = useState([0, 0]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      initialPosition = _useState6[0],\n      setInitialPosition = _useState6[1];\n\n  useEffect(function () {\n    function loadPosition() {\n      var _await$Location$reque, status, location, _location$coords, latitude, longitude;\n\n      return _regeneratorRuntime.async(function loadPosition$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(Location.requestPermissionsAsync());\n\n            case 2:\n              _await$Location$reque = _context.sent;\n              status = _await$Location$reque.status;\n              console.log(status);\n\n              if (!(status !== 'granted')) {\n                _context.next = 8;\n                break;\n              }\n\n              Alert.alert('Precisamos da sua permissão para obter localização');\n              return _context.abrupt(\"return\");\n\n            case 8:\n              _context.next = 10;\n              return _regeneratorRuntime.awrap(Location.getCurrentPositionAsync());\n\n            case 10:\n              location = _context.sent;\n              _location$coords = location.coords, latitude = _location$coords.latitude, longitude = _location$coords.longitude;\n              setInitialPosition([latitude, longitude]);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }, []);\n  useEffect(function () {\n    api.get('items').then(function (response) {\n      setItems(response.data);\n    });\n  }), [];\n\n  function handleNavigateBack() {\n    navigation.goBack();\n  }\n\n  ;\n\n  function handleNavigateToDetail() {\n    navigation.navigate('Detail');\n  }\n\n  function handleSelectItem(id) {\n    var alreadySelected = selectedItems.findIndex(function (item) {\n      return item === id;\n    });\n\n    if (alreadySelected >= 0) {\n      var filteredItems = selectedItems.filter(function (item) {\n        return item !== id;\n      });\n      setSelectedItems(filteredItems);\n    } else {\n      setSelectedItems([].concat(_toConsumableArray(selectedItems), [id]));\n    }\n  }\n\n  return React.createElement(View, {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 3\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: handleNavigateBack,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 4\n    }\n  }, React.createElement(Icon, {\n    name: \"arrow-left\",\n    size: 20,\n    color: \"#34cb79\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  })), React.createElement(Text, {\n    style: styles.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 4\n    }\n  }, \"Bem Vindo.\"), React.createElement(Text, {\n    style: styles.description,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 4\n    }\n  }, \"Encontre no mapa um ponto de coleta.\"), React.createElement(View, {\n    style: styles.mapContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 4\n    }\n  }, initialPosition[0] !== 0 && React.createElement(MapView, {\n    style: styles.map,\n    initialRegion: {\n      latitude: initialPosition[0],\n      longitude: initialPosition[1],\n      latitudeDelta: 0.014,\n      longitudeDelta: 0.014\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 6\n    }\n  }, React.createElement(Marker, {\n    style: styles.mapMarker,\n    onPress: handleNavigateToDetail,\n    coordinate: {\n      latitude: -15.9606114,\n      longitude: -48.0505933\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: styles.mapMarkerContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 8\n    }\n  }, React.createElement(Image, {\n    style: styles.mapMarkerImage,\n    source: {\n      uri: 'https://images.unsplash.com/photo-1591303872989-2640dc28185b?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=400&q=80'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }), React.createElement(Text, {\n    style: styles.mapMarkerTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }, \"Mercado\"))))), React.createElement(View, {\n    style: styles.itemsContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 4\n    }\n  }, React.createElement(ScrollView, {\n    horizontal: true,\n    showsHorizontalScrollIndicator: false,\n    contentContainerStyle: {\n      paddingHorizontal: 20\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 5\n    }\n  }, items.map(function (item) {\n    return React.createElement(TouchableOpacity, {\n      key: String(item.id),\n      style: [styles.item, selectedItems.includes(item.id) ? styles.selectedItem : {}],\n      onPress: function onPress() {\n        return handleSelectItem(item.id);\n      },\n      activeOpacity: 0.6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 7\n      }\n    }, React.createElement(SvgUri, {\n      width: 42,\n      height: 42,\n      uri: item.image_url,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 8\n      }\n    }), React.createElement(Text, {\n      style: styles.itemTitle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 8\n      }\n    }, item.title));\n  }))));\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    paddingHorizontal: 32,\n    paddingTop: 20 + Constants.statusBarHeight\n  },\n  title: {\n    fontSize: 20,\n    fontFamily: 'Ubuntu_700Bold',\n    marginTop: 24\n  },\n  description: {\n    color: '#6C6C80',\n    fontSize: 16,\n    marginTop: 4,\n    fontFamily: 'Roboto_400Regular'\n  },\n  mapContainer: {\n    flex: 1,\n    width: '100%',\n    borderRadius: 10,\n    overflow: 'hidden',\n    marginTop: 16\n  },\n  map: {\n    width: '100%',\n    height: '100%'\n  },\n  mapMarker: {\n    width: 90,\n    height: 80\n  },\n  mapMarkerContainer: {\n    width: 90,\n    height: 70,\n    backgroundColor: '#34CB79',\n    flexDirection: 'column',\n    borderRadius: 8,\n    overflow: 'hidden',\n    alignItems: 'center'\n  },\n  mapMarkerImage: {\n    width: 90,\n    height: 45,\n    resizeMode: 'cover'\n  },\n  mapMarkerTitle: {\n    flex: 1,\n    fontFamily: 'Roboto_400Regular',\n    color: '#FFF',\n    fontSize: 13,\n    lineHeight: 23\n  },\n  itemsContainer: {\n    flexDirection: 'row',\n    marginTop: 16,\n    marginBottom: 32\n  },\n  item: {\n    backgroundColor: '#fff',\n    borderWidth: 2,\n    borderColor: '#eee',\n    height: 120,\n    width: 120,\n    borderRadius: 8,\n    paddingHorizontal: 16,\n    paddingTop: 20,\n    paddingBottom: 16,\n    marginRight: 8,\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    textAlign: 'center'\n  },\n  selectedItem: {\n    borderColor: '#34CB79',\n    borderWidth: 2\n  },\n  itemTitle: {\n    fontFamily: 'Roboto_400Regular',\n    textAlign: 'center',\n    fontSize: 13\n  }\n});\nexport default Points;","map":{"version":3,"sources":["/home/leonardo/dev/nlw1/nlw_mobile/src/pages/Points/index.tsx"],"names":["React","useState","useEffect","Constants","Feather","Icon","useNavigation","MapView","Marker","SvgUri","api","Location","Points","navigation","items","setItems","selectedItems","setSelectedItems","initialPosition","setInitialPosition","loadPosition","requestPermissionsAsync","status","console","log","Alert","alert","getCurrentPositionAsync","location","coords","latitude","longitude","get","then","response","data","handleNavigateBack","goBack","handleNavigateToDetail","navigate","handleSelectItem","id","alreadySelected","findIndex","item","filteredItems","filter","styles","container","title","description","mapContainer","map","latitudeDelta","longitudeDelta","mapMarker","mapMarkerContainer","mapMarkerImage","uri","mapMarkerTitle","itemsContainer","paddingHorizontal","String","includes","selectedItem","image_url","itemTitle","StyleSheet","create","flex","paddingTop","statusBarHeight","fontSize","fontFamily","marginTop","color","width","borderRadius","overflow","height","backgroundColor","flexDirection","alignItems","resizeMode","lineHeight","marginBottom","borderWidth","borderColor","paddingBottom","marginRight","justifyContent","textAlign"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Constants from \"expo-constants\";\nimport { Feather as Icon } from \"@expo/vector-icons\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { View, Text, StyleSheet, TouchableOpacity, ScrollView, Image, Alert } from \"react-native\";\nimport MapView, { Marker } from \"react-native-maps\";\nimport { SvgUri } from \"react-native-svg\";\nimport api from '../../services/api';\nimport * as Location from 'expo-location';\n\n\ninterface Item {\n\tid: number;\n\ttitle: string;\n\timage_url: string;\n}\n\nconst Points = () => {\n\tconst navigation = useNavigation();\n\n\tconst [items, setItems] = useState<Item[]>([]);\n\tconst [selectedItems, setSelectedItems] = useState<number[]>([]);\n\n\tconst [initialPosition, setInitialPosition] = useState<[number, number]>([0, 0]);\n\n\tuseEffect(() => {\n\t\tasync function loadPosition() {\n\t\t\tconst { status } = await Location.requestPermissionsAsync();\n\t\t\tconsole.log(status);\n\n\t\t\tif (status !== 'granted') {\n\t\t\t\tAlert.alert('Precisamos da sua permissão para obter localização');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst location = await Location.getCurrentPositionAsync();\n\n\t\t\tconst { latitude, longitude } = location.coords;\n\n\t\t\tsetInitialPosition([\n\t\t\t\tlatitude,\n\t\t\t\tlongitude\n\t\t\t]);\n\t\t}\n\t}, []);\n\n\tuseEffect(() => {\n\t\tapi.get('items').then(response => {\n\t\t\tsetItems(response.data)\n\t\t});\n\t}), [];\n\n\tfunction handleNavigateBack() {\n\t\tnavigation.goBack()\n\t};\n\n\tfunction handleNavigateToDetail() {\n\t\tnavigation.navigate('Detail');\n\t}\n\n\tfunction handleSelectItem(id: number) {\n\t\tconst alreadySelected = selectedItems.findIndex(item => item === id);\n\n\t\tif (alreadySelected >= 0) {\n\t\t\tconst filteredItems = selectedItems.filter(item => item !== id);\n\t\t\tsetSelectedItems(filteredItems);\n\t\t} else {\n\t\t\tsetSelectedItems([...selectedItems, id]);\n\t\t}\n\t}\n\n\treturn (\n\t\t<View style={styles.container}>\n\t\t\t<TouchableOpacity onPress={handleNavigateBack}>\n\t\t\t\t<Icon name=\"arrow-left\" size={20} color=\"#34cb79\" />\n\t\t\t</TouchableOpacity>\n\n\t\t\t<Text style={styles.title}>Bem Vindo.</Text>\n\t\t\t<Text style={styles.description}>Encontre no mapa um ponto de coleta.</Text>\n\n\t\t\t<View style={styles.mapContainer}>\n\t\t\t\t{initialPosition[0] !== 0 && (\n\t\t\t\t\t<MapView\n\t\t\t\t\t\tstyle={styles.map}\n\t\t\t\t\t\tinitialRegion={{\n\t\t\t\t\t\t\tlatitude: initialPosition[0],\n\t\t\t\t\t\t\tlongitude: initialPosition[1],\n\t\t\t\t\t\t\tlatitudeDelta: 0.014,\n\t\t\t\t\t\t\tlongitudeDelta: 0.014,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Marker\n\t\t\t\t\t\t\tstyle={styles.mapMarker}\n\t\t\t\t\t\t\tonPress={handleNavigateToDetail}\n\t\t\t\t\t\t\tcoordinate={{\n\t\t\t\t\t\t\t\tlatitude: -15.9606114,\n\t\t\t\t\t\t\t\tlongitude: -48.0505933\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<View style={styles.mapMarkerContainer}>\n\t\t\t\t\t\t\t\t<Image style={styles.mapMarkerImage} source={{ uri: 'https://images.unsplash.com/photo-1591303872989-2640dc28185b?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=400&q=80' }} />\n\t\t\t\t\t\t\t\t<Text style={styles.mapMarkerTitle}>Mercado</Text>\n\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t</Marker>\n\t\t\t\t\t</MapView>\n\t\t\t\t)}\n\t\t\t</View>\n\t\t\t<View style={styles.itemsContainer}>\n\t\t\t\t<ScrollView\n\t\t\t\t\thorizontal\n\t\t\t\t\tshowsHorizontalScrollIndicator={false}\n\t\t\t\t\tcontentContainerStyle={{ paddingHorizontal: 20 }}\n\t\t\t\t>\n\t\t\t\t\t{items.map(item => (\n\t\t\t\t\t\t<TouchableOpacity\n\t\t\t\t\t\t\tkey={String(item.id)}\n\t\t\t\t\t\t\tstyle={[\n\t\t\t\t\t\t\t\tstyles.item,\n\t\t\t\t\t\t\t\tselectedItems.includes(item.id) ? styles.selectedItem : {}\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\tonPress={() => handleSelectItem(item.id)}\n\t\t\t\t\t\t\tactiveOpacity={0.6}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<SvgUri width={42} height={42} uri={item.image_url} />\n\t\t\t\t\t\t\t<Text style={styles.itemTitle}>{item.title}</Text>\n\t\t\t\t\t\t</TouchableOpacity>\n\t\t\t\t\t))}\n\t\t\t\t</ScrollView>\n\t\t\t</View>\n\t\t</View>\n\t);\n};\n\nconst styles = StyleSheet.create({\n\tcontainer: {\n\t\tflex: 1,\n\t\tpaddingHorizontal: 32,\n\t\tpaddingTop: 20 + Constants.statusBarHeight,\n\t},\n\n\ttitle: {\n\t\tfontSize: 20,\n\t\tfontFamily: 'Ubuntu_700Bold',\n\t\tmarginTop: 24,\n\t},\n\n\tdescription: {\n\t\tcolor: '#6C6C80',\n\t\tfontSize: 16,\n\t\tmarginTop: 4,\n\t\tfontFamily: 'Roboto_400Regular',\n\t},\n\n\tmapContainer: {\n\t\tflex: 1,\n\t\twidth: '100%',\n\t\tborderRadius: 10,\n\t\toverflow: 'hidden',\n\t\tmarginTop: 16,\n\t},\n\n\tmap: {\n\t\twidth: '100%',\n\t\theight: '100%',\n\t},\n\n\tmapMarker: {\n\t\twidth: 90,\n\t\theight: 80,\n\t},\n\n\tmapMarkerContainer: {\n\t\twidth: 90,\n\t\theight: 70,\n\t\tbackgroundColor: '#34CB79',\n\t\tflexDirection: 'column',\n\t\tborderRadius: 8,\n\t\toverflow: 'hidden',\n\t\talignItems: 'center'\n\t},\n\n\tmapMarkerImage: {\n\t\twidth: 90,\n\t\theight: 45,\n\t\tresizeMode: 'cover',\n\t},\n\n\tmapMarkerTitle: {\n\t\tflex: 1,\n\t\tfontFamily: 'Roboto_400Regular',\n\t\tcolor: '#FFF',\n\t\tfontSize: 13,\n\t\tlineHeight: 23,\n\t},\n\n\titemsContainer: {\n\t\tflexDirection: 'row',\n\t\tmarginTop: 16,\n\t\tmarginBottom: 32,\n\t},\n\n\titem: {\n\t\tbackgroundColor: '#fff',\n\t\tborderWidth: 2,\n\t\tborderColor: '#eee',\n\t\theight: 120,\n\t\twidth: 120,\n\t\tborderRadius: 8,\n\t\tpaddingHorizontal: 16,\n\t\tpaddingTop: 20,\n\t\tpaddingBottom: 16,\n\t\tmarginRight: 8,\n\t\talignItems: 'center',\n\t\tjustifyContent: 'space-between',\n\n\t\ttextAlign: 'center',\n\t},\n\n\tselectedItem: {\n\t\tborderColor: '#34CB79',\n\t\tborderWidth: 2,\n\t},\n\n\titemTitle: {\n\t\tfontFamily: 'Roboto_400Regular',\n\t\ttextAlign: 'center',\n\t\tfontSize: 13,\n\t},\n});\n\nexport default Points;"]},"metadata":{},"sourceType":"module"}